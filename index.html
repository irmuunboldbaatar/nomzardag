<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NomZardag | Student Marketplace</title>
    <link rel="stylesheet" href="style.css" />
    <script type="module" src="script.js" defer></script>
  </head>
  <body>
    <header class="hero">
      <nav class="navbar">
        <div class="logo" onclick="showHome()" style="cursor: pointer">
          Nom<span>Zardag</span>
        </div>
        <div class="search-bar">
          <input type="text" placeholder="Номын нэрээр хайх..." />
        </div>
        <button
          class="sell-btn"
          onclick="document.getElementById('sellModal').classList.remove('hidden')"
        >
          + Зар нэмэх
        </button>
      </nav>
    </header>
    <main class="container">
      
      <div id="sellModal" class="modal-overlay hidden">
        <div class="modal-content">
          <h2>List Your Book</h2>
          <form onsubmit="addNewBook(event)">
            <input
              type="text"
              id="formTitle"
              placeholder="Номын нэр"
              required
            />
            <input type="text" id="formAuthor" placeholder="Зохиогч"/>
            <input
              type="number"
              id="formPrice"
              placeholder="Үнэ ₮"
              required
            />

            <div class="select-group">
              <select id="formGrade">
                <option value="10-р анги">10-р анги</option>
                <option value="11-р анги">11-р анги</option>
                <option value="12-р анги">12-р анги</option>
                <option value="Бусад">Бусад</option>
              </select>

              <select id="formSubject">
                <option value="Англи хэл">Англи хэл</option>
                <option value="Бизнес судлал">Бизнес судлал</option>
                <option value="Биологи">Биологи</option>
                <option value="Газар зүй">Газар зүй</option>
                <option value="Дизайн технологи">Дизайн технологи</option>
                <option value="Иргэний боловсрол">Иргэний боловсрол</option>
                <option value="Математик">Математик</option>
                <option value="Монгол хэл">Монгол хэл</option>
                <option value="Монголын түүх">Монголын түүх</option>
                <option value="Мэдээллийн технологи">
                  Мэдээллийн технологи
                </option>
                <option value="Орос хэл">Орос хэл</option>
                <option value="Уран зохиол">Уран зохиол</option>
                <option value="Үндэсний бичиг">Үндэсний бичиг</option>
                <option value="Физик">Физик</option>
                <option value="Хими">Хими</option>
                <option value="Эрүүл мэнд">Эрүүл мэнд</option>
                <option value="Бусад">Бусад</option>
              </select>

              
              <input
                type="number"
                id="formYear"
                placeholder="Хэвлэгдсэн он"
                required
              />
              <div class="form-group">
                <label for="formImage">Upload Book Photo:</label>
                <input type="file" id="formImage" accept="image/*" required>
              </div>
              <div id="imagePreview" class="hidden">
                <img id="previewImg" src="" style="width: 100px; height: 100px; object-fit: cover; border-radius: 8px;">
              </div>
            </div>

            <div id="uploadContainer" class="hidden" style="margin: 15px 0;">
              <p id="uploadStatus" style="font-size: 0.8rem; margin-bottom: 5px;">Uploading: 0%</p>
              <div class="progress-bar-bg" style="width: 100%; background: #e2e8f0; height: 10px; border-radius: 5px;">
                <div id="progressBar" style="width: 0%; background: #4f46e5; height: 100%; border-radius: 5px; transition: width 0.3s;"></div>
              </div>
            </div>

            <div class="form-actions">
              <button type="submit" class="confirm-btn">Post Now</button>
              <button
                type="button"
                class="cancel-btn"
                onclick="document.getElementById('sellModal').classList.add('hidden')"
              >
                Cancel
              </button>
            </div>
          </form>
        </div>
      </div>

      <div class="filter-section">
        <div class="filter-container">
          <select id="gradeFilter">
            <option value="all">Бүх анги</option>
            <option value="10-р анги">10-р анги</option>
            <option value="11-р анги">11-р анги</option>
            <option value="12-р анги">12-р анги</option>
          </select>

          <select id="subjectFilter">
            <option value="all">Бүх хичээл</option>
            <option value="Англи хэл">Англи хэл</option>
            <option value="Бизнес судлал">Бизнес судлал</option>
            <option value="Биологи">Биологи</option>
            <option value="Газар зүй">Газар зүй</option>
            <option value="Дизайн технологи">Дизайн технологи</option>
            <option value="Иргэний боловсрол">Иргэний боловсрол</option>
            <option value="Математик">Математик</option>
            <option value="Монгол хэл">Монгол хэл</option>
            <option value="Монголын түүх">Монголын түүх</option>
            <option value="Мэдээллийн технологи">Мэдээллийн технологи</option>
            <option value="Орос хэл">Орос хэл</option>
            <option value="Уран зохиол">Уран зохиол</option>
            <option value="Үндэсний бичиг">Үндэсний бичиг</option>
            <option value="Физик">Физик</option>
            <option value="Хими">Хими</option>
            <option value="Эрүүл мэнд">Эрүүл мэнд</option>
            <option value="Бусад">Бусад</option>
          </select>
        </div>
      </div>

      <section class="book-grid" id="bookGrid"></section>

      <section id="detailPage" class="hidden">
        <button class="back-btn" onclick="showHome()">← Back to Search</button>

        <div class="product-container">
          <div class="product-images">
            <div class="main-img" id="detailImg"></div>
            <div class="thumbnail-row">
              <div class="thumb active"></div>
              <div class="thumb"></div>
              <div class="thumb"></div>
            </div>
          </div>

          <div class="product-specs">
            <h1 id="detailTitle"></h1>
            <p id="detailAuthor" class="author-label"></p>
            <div class="price-tag" id="detailPrice"></div>

            <div class="detail-grid">
              <div class="spec-item">
                <strong>Course</strong><span id="detailCode"></span>
              </div>
              <div class="spec-item">
                <strong>Grade</strong><span id="detailGrade"></span>
              </div>
              <div class="spec-item">
                <strong>Condition</strong><span id="detailYear"></span>
              </div>
            </div>

            <div class="description-box">
              <h3>Seller's Note</h3>
              <p>
                This book was used for one semester. No missing pages, slight
                highlighting in some chapters. Great condition for the price!
              </p>
            </div>

            <button class="buy-btn large" onclick="contactSeller()">
              Message Seller
            </button>
          </div>
        </div>

        <hr class="divider" />
        <div class="extra-list">
          <h3>Similar Books for your Course</h3>
          <div class="mini-grid" id="suggestedGrid"></div>
        </div>

        <div class="extra-list">
          <h3>Recently Viewed</h3>
          <div class="mini-grid" id="historyGrid"></div>
        </div>
      </section>
    </main>
  </body>
</html>
